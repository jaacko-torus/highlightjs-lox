{"version":3,"sources":["lox.min.js","lox.ts"],"names":["Object","defineProperty","exports","value","_highlight","_interopRequireDefault","require","obj","__esModule","default","regex","hljs","IDENT_RE","LANGUAGE_KEYWORDS","LITERALS","BUILT_IN_VARIABLES","KEYWORDS","$pattern","keyword","literal","NUMBER","scope","variants","begin","relevance","PARAMS_CONTAINS","C_LINE_COMMENT_MODE","end","keywords","contains","PARAMS","excludeBegin","excludeEnd","CLASS_OR_EXTENDS","match","FUNCTION_DEFINITION","label","illegal","UPPER_CASE_CONSTANT","noneOf","list","concat","join","FUNCTION_CALL","lookahead","PROPERTY_ACCESS","lox","name","aliases","QUOTE_STRING_MODE","RE_STARTERS_RE","REGEXP_MODE","beginKeywords","UNDERSCORE_IDENT_RE","returnBegin","inherit","TITLE_MODE","_default"],"mappings":"AAAA,aAEAA,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAiB,aAAI,ECGrB,IAAAE,EAAAC,EAAAC,QAAA,iBDCA,SAASD,EAAuBE,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAEE,QAAWF;;;;;;GCAzF,IAAMG,EAASC,EAAAA,QAA6BD,MAEtCE,EAAW,uBAEXC,EAAoB,CACzB,QACA,OACA,MACA,WACA,KACA,QACA,SACA,MACA,SAGKC,EAAW,CAChB,QACA,MACA,QAGKC,EAAqB,CAC1B,QACA,QAGKC,EAAW,CAChBC,SAAUL,EACVM,QAASL,EACTM,QAASL,EACT,oBAAqBC,GAGhBK,EAAe,CACpBC,MAAO,SACPC,SAAU,CACT,CAAEC,MAAO,UACT,CAAEA,MAAO,iBAEVC,UAAW,GAGNC,EAAkB,CACvBd,EAAAA,QAAKe,oBAEL,CACCH,MAAO,KACPI,IAAK,KACLC,SAAUZ,EACVa,SAAU,CAAC,OAAQlB,EAAAA,QAAKe,uBAIpBI,EAAe,CACpBT,MAAO,SACPE,MAAO,KACPI,IAAK,KACLI,cAAc,EACdC,YAAY,EACZJ,SAAUZ,EACVa,SAAUJ,GAGLQ,EAAyB,CAC9BX,SAAU,CAET,CACCY,MAAO,CACN,QACA,MACAtB,EACA,MACA,IACA,OAEDS,MAAO,CACN,EAAG,UACH,EAAG,cACH,EAAG,UACH,EAAG,0BAIL,CACCa,MAAO,CACN,QACA,MACAtB,GAEDS,MAAO,CACN,EAAG,UACH,EAAG,kBAMDc,EAA4B,CACjCb,SAAU,CACT,CACCY,MAAO,CACN,WACA,MACAtB,EACA,eAIHS,MAAO,CACN,EAAG,UACH,EAAG,kBAEJe,MAAO,WACPP,SAAU,CAACC,GACXO,QAAS,KAGJC,EAA4B,CACjCd,UAAW,EACXU,MAAO,qBACPb,MAAO,qBAGR,SAASkB,EAAOC,GACf,OAAO9B,EAAM+B,OAAO,MAAOD,EAAKE,KAAK,KAAM,KAG5C,IAAMC,EAAsB,CAC3BT,MAAOxB,EAAM+B,OACZ,KACAF,EAAO,CAAC,UACR3B,EAAUF,EAAMkC,UAAU,OAC3BvB,MAAO,iBACPG,UAAW,GAGNqB,EAAwB,CAC7BtB,MAAOb,EAAM+B,OAAO,KAAM/B,EAAMkC,UAC/BlC,EAAM+B,OAAO7B,EAAU,sBAExBe,IAAKf,EACLmB,cAAc,EACdV,MAAO,WACPG,UAAW,GAUNsB,IAAkB,SAACnC,GACxB,MAAO,CACNoC,KAAM,MACNC,QAAS,CAAC,OACVpB,SAAUZ,EACVqB,QAAS,eACTR,SAAU,CACTlB,EAAKsC,kBACLtC,EAAKe,oBACLN,EACA,CACCG,MAAO,IAAMZ,EAAKuC,eAAiB,uBACnCtB,SAAU,SACVJ,UAAW,EACXK,SAAU,CACTlB,EAAKe,oBACLf,EAAKwC,YACL,CACC5B,MAAO,IACPC,UAAW,GAEZ,CACCU,MAAO,MACPV,UAAW,KAIdW,EACA,CAECiB,cAAe,gBAEhB,CAIC7B,MAAO,kBAAoBZ,EAAK0C,oBAAzB,gEAQPC,aAAa,EACblB,MAAO,WACPP,SAAU,CACTC,EACAnB,EAAK4C,QAAQ5C,EAAK6C,WAAY,CAAEjC,MAAOX,EAAUS,MAAO,qBAG1DwB,EACA,CACCX,MAAO,CAAC,mBACRb,MAAO,CAAE,EAAG,kBACZQ,SAAU,CAACC,IAEZa,EACAL,EACAL,EACA,CACCC,MAAO,aDlEPuB,ECwEWX,IDvEf5C,QAAiB,QAAIuD","file":"lox.min.js","sourcesContent":[null,"/**\r\n * @name Lox\r\n * @param {LanguageFn} hljs\r\n * @website http://craftinginterpreters.com/\r\n * @license MIT\r\n */\r\n\r\nimport type { HLJSApi, Language, LanguageFn, Mode } from \"highlight.js\";\r\nimport hljs from \"highlight.js\";\r\nconst regex = (hljs as HLJSApi & HLJSRegex).regex\r\n\r\nconst IDENT_RE = \"[A-Za-z][0-9A-Za-z]*\"\r\n\r\nconst LANGUAGE_KEYWORDS = [\r\n\t\"class\",\r\n\t\"else\",\r\n\t\"for\",\r\n\t\"function\",\r\n\t\"if\",\r\n\t\"print\",\r\n\t\"return\",\r\n\t\"var\",\r\n\t\"while\",\r\n]\r\n\r\nconst LITERALS = [\r\n\t\"false\",\r\n\t\"nil\",\r\n\t\"true\",\r\n]\r\n\r\nconst BUILT_IN_VARIABLES = [\r\n\t\"super\",\r\n\t\"this\",\r\n]\r\n\r\nconst KEYWORDS = {\r\n\t$pattern: IDENT_RE,\r\n\tkeyword: LANGUAGE_KEYWORDS,\r\n\tliteral: LITERALS,\r\n\t\"variable.language\": BUILT_IN_VARIABLES\r\n};\r\n\r\nconst NUMBER: Mode = {\r\n\tscope: \"number\",\r\n\tvariants: [\r\n\t\t{ begin: \"[\\\\d]+\" },\r\n\t\t{ begin: \"\\\\d+(\\.\\\\d+)?\" },\r\n\t],\r\n\trelevance: 0\r\n};\r\n\r\nconst PARAMS_CONTAINS = [\r\n\thljs.C_LINE_COMMENT_MODE,\r\n\t// eat recursive parens in sub expressions\r\n\t{\r\n\t\tbegin: /\\(/,\r\n\t\tend: /\\)/,\r\n\t\tkeywords: KEYWORDS,\r\n\t\tcontains: [\"self\", hljs.C_LINE_COMMENT_MODE]\r\n\t} as Mode\r\n];\r\n\r\nconst PARAMS: Mode = {\r\n\tscope: \"params\",\r\n\tbegin: /\\(/,\r\n\tend: /\\)/,\r\n\texcludeBegin: true,\r\n\texcludeEnd: true,\r\n\tkeywords: KEYWORDS,\r\n\tcontains: PARAMS_CONTAINS\r\n};\r\n\r\nconst CLASS_OR_EXTENDS: Mode = {\r\n\tvariants: [\r\n\t\t// class Car < Vehicle\r\n\t\t{\r\n\t\t\tmatch: [\r\n\t\t\t\t/class/,\r\n\t\t\t\t/\\s+/,\r\n\t\t\t\tIDENT_RE,\r\n\t\t\t\t/\\s+/,\r\n\t\t\t\t/</,\r\n\t\t\t\t/\\s+/,\r\n\t\t\t],\r\n\t\t\tscope: {\r\n\t\t\t\t1: \"keyword\",\r\n\t\t\t\t3: \"title.class\",\r\n\t\t\t\t5: \"keyword\",\r\n\t\t\t\t7: \"title.class.inherited\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t// class Car\r\n\t\t{\r\n\t\t\tmatch: [\r\n\t\t\t\t/class/,\r\n\t\t\t\t/\\s+/,\r\n\t\t\t\tIDENT_RE\r\n\t\t\t],\r\n\t\t\tscope: {\r\n\t\t\t\t1: \"keyword\",\r\n\t\t\t\t3: \"title.class\"\r\n\t\t\t}\r\n\t\t},\r\n\t]\r\n};\r\n\r\nconst FUNCTION_DEFINITION: Mode = {\r\n\tvariants: [\r\n\t\t{\r\n\t\t\tmatch: [\r\n\t\t\t\t/function/,\r\n\t\t\t\t/\\s+/,\r\n\t\t\t\tIDENT_RE,\r\n\t\t\t\t/(?=\\s*\\()/\r\n\t\t\t]\r\n\t\t},\r\n\t],\r\n\tscope: {\r\n\t\t1: \"keyword\",\r\n\t\t3: \"title.function\"\r\n\t},\r\n\tlabel: \"func.def\",\r\n\tcontains: [PARAMS],\r\n\tillegal: /%/\r\n};\r\n\r\nconst UPPER_CASE_CONSTANT: Mode = {\r\n\trelevance: 0,\r\n\tmatch: /\\b[A-Z][A-Z0-9]+\\b/,\r\n\tscope: \"variable.constant\"\r\n};\r\n\r\nfunction noneOf(list: string[]) {\r\n\treturn regex.concat(\"(?!\", list.join(\"|\"), \")\");\r\n}\r\n\r\nconst FUNCTION_CALL: Mode = {\r\n\tmatch: regex.concat(\r\n\t\t/\\b/,\r\n\t\tnoneOf([\"super\"]),\r\n\t\tIDENT_RE, regex.lookahead(/\\(/)),\r\n\tscope: \"title.function\",\r\n\trelevance: 0\r\n};\r\n\r\nconst PROPERTY_ACCESS: Mode = {\r\n\tbegin: regex.concat(/\\./, regex.lookahead(\r\n\t\tregex.concat(IDENT_RE, /(?![0-9A-Za-z(])/)\r\n\t)),\r\n\tend: IDENT_RE,\r\n\texcludeBegin: true,\r\n\tscope: \"property\",\r\n\trelevance: 0\r\n};\r\n\r\n// HLJSApi\r\n\r\n/**\r\n * @name Lox\r\n * @param {HLJSApi} hljs\r\n * @website http://craftinginterpreters.com/\r\n */\r\nconst lox: LanguageFn = (hljs: HLJSApi) => {\r\n\treturn {\r\n\t\tname: \"Lox\",\r\n\t\taliases: [\"lox\"],\r\n\t\tkeywords: KEYWORDS,\r\n\t\tillegal: /#(?![$_A-z])/,\r\n\t\tcontains: [\r\n\t\t\thljs.QUOTE_STRING_MODE,\r\n\t\t\thljs.C_LINE_COMMENT_MODE,\r\n\t\t\tNUMBER,\r\n\t\t\t{ // \"value\" container\r\n\t\t\t\tbegin: \"(\" + hljs.RE_STARTERS_RE + \"|\\\\b(return)\\\\b)\\\\s*\",\r\n\t\t\t\tkeywords: \"return\",\r\n\t\t\t\trelevance: 0,\r\n\t\t\t\tcontains: [\r\n\t\t\t\t\thljs.C_LINE_COMMENT_MODE,\r\n\t\t\t\t\thljs.REGEXP_MODE,\r\n\t\t\t\t\t{ // could be a comma delimited list of params to a function call\r\n\t\t\t\t\t\tbegin: /,/,\r\n\t\t\t\t\t\trelevance: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmatch: /\\s+/,\r\n\t\t\t\t\t\trelevance: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tFUNCTION_DEFINITION,\r\n\t\t\t{\r\n\t\t\t\t// prevent this from getting swallowed up by function since they appear \"function like\"\r\n\t\t\t\tbeginKeywords: \"while if for\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// we have to count the parens to make sure we actually have the correct\r\n\t\t\t\t// bounding ( ).  There could be any number of sub-expressions inside\r\n\t\t\t\t// also surrounded by parens.\r\n\t\t\t\tbegin: \"\\\\b(?!function)\" + hljs.UNDERSCORE_IDENT_RE +\r\n\t\t\t\t\t\"\\\\(\" + // first parens\r\n\t\t\t\t\t\"[^()]*(\\\\(\" +\r\n\t\t\t\t\t\"[^()]*(\\\\(\" +\r\n\t\t\t\t\t\"[^()]*\" +\r\n\t\t\t\t\t\"\\\\)[^()]*)*\" +\r\n\t\t\t\t\t\"\\\\)[^()]*)*\" +\r\n\t\t\t\t\t\"\\\\)\\\\s*\\\\{\", // end parens\r\n\t\t\t\treturnBegin: true,\r\n\t\t\t\tlabel: \"func.def\",\r\n\t\t\t\tcontains: [\r\n\t\t\t\t\tPARAMS,\r\n\t\t\t\t\thljs.inherit(hljs.TITLE_MODE, { begin: IDENT_RE, scope: \"title.function\" })\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tPROPERTY_ACCESS,\r\n\t\t\t{\r\n\t\t\t\tmatch: [/\\binit(?=\\s*\\()/],\r\n\t\t\t\tscope: { 1: \"title.function\" },\r\n\t\t\t\tcontains: [PARAMS]\r\n\t\t\t},\r\n\t\t\tFUNCTION_CALL,\r\n\t\t\tUPPER_CASE_CONSTANT,\r\n\t\t\tCLASS_OR_EXTENDS,\r\n\t\t\t{\r\n\t\t\t\tmatch: /\\$[(.]/ // relevance booster for a pattern common to JS libs: `$(something)` and `$.something`\r\n\t\t\t}\r\n\t\t]\r\n\t} as Language;\r\n}\r\n\r\nexport default lox;"]}